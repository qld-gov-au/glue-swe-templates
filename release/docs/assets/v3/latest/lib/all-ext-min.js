!function(e){"use strict";e.fn.generateId=function(t){var n=1;return t=t?e.trim(t.toLowerCase().replace(/[^a-z0-9_]+/g," ")).replace(/\s+/g,"-"):"id",this.each(function(){var e;if(!this.getAttribute("id")){for(e=t;document.getElementById(e);)e=t+String(n),n++;this.setAttribute("id",e)}})}}(jQuery);var ResizeEvents={eventElement:document,initialised:!1,timeoutID:null,currentWindowWidth:null,currentWindowHeight:null,heartbeatThrottleCount:0,watchedElements:[],throttleStates:{},conf:{windowResizeEvent:"x-window-resize",windowWidthResizeEvent:"x-window-width-resize",windowHeightResizeEvent:"x-window-height-resize",elementWidthResizeEvent:"x-width-change",elementHeightResizeEvent:"x-height-change",initialResizeEvent:"x-initial-sizes",watcherClass:"resize-events-watcher",framesPerHeartbeat:6}};!function(e,t){"use strict";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),ResizeEvents.bind=function(t,n){e(function(){!0!==ResizeEvents.initialised&&ResizeEvents.initialise()}),e(ResizeEvents.eventElement).bind(t,n)},ResizeEvents.initialise=function(){if(!0!==ResizeEvents.initialised){var t=e(window).width(),n=e(window).height();ResizeEvents.currentWindowWidth=t,ResizeEvents.currentWindowHeight=n,e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.initialResizeEvent,[t,n]),ResizeEvents.initialised=!0,e(window).resize(ResizeEvents.handleWindowResize)}},e.fn.registerWatcher=function(t,n){var i=-1!==t.indexOf("width"),a=-1!==t.indexOf("height");void 0===n&&(e(this).wrapInner('<div class="'+ResizeEvents.conf.watcherClass+'"></div>'),n="."+ResizeEvents.conf.watcherClass),e(this).each(function(){e(this).data("resizeEvents",{watchWidth:i,previousWidth:null,watchHeight:a,previousHeight:null,innerElementSelector:n})}),ResizeEvents.watchedElements[ResizeEvents.watchedElements.length]=e(this),1===ResizeEvents.watchedElements.length&&ResizeEvents.heartbeat()},ResizeEvents.heartbeat=function(){if(ResizeEvents.heartbeatThrottleCount++%ResizeEvents.conf.framesPerHeartbeat!=0)return void window.requestAnimFrame(ResizeEvents.heartbeat);var t,n=null,i=null,a=function(){var t=e(this),a=t.data("resizeEvents"),o=t.find(a.innerElementSelector).eq(0);a.watchWidth&&(n=o.width())!==a.previousWidth&&(t.trigger(ResizeEvents.conf.elementWidthResizeEvent,[n]),a.previousWidth=n),a.watchHeight&&(i=o.height())!==a.previousHeight&&(t.trigger(ResizeEvents.conf.elementHeightResizeEvent,[i]),a.previousHeight=i),t.data("resizeEvents",a)};for(t=0;t<ResizeEvents.watchedElements.length;t++)ResizeEvents.watchedElements[t].each(a);window.requestAnimFrame(ResizeEvents.heartbeat)},ResizeEvents.handleWindowResize=function(){t.oldIE&&t.oldIEversion<7&&ResizeEvents.throttle(ResizeEvents.handleWindowResize,200)||ResizeEvents.broadcastWindowResize()},ResizeEvents.broadcastWindowResize=function(){ResizeEvents.timeoutID=null;var t=e(window).width(),n=e(window).height(),i=!1;ResizeEvents.currentWindowWidth!==t&&(e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowWidthResizeEvent,[t,n]),e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowResizeEvent,[t,n]),ResizeEvents.currentWindowWidth=t,i=!0),ResizeEvents.currentWindowHeight!==n&&(e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowHeightResizeEvent,[t,n]),i||e(ResizeEvents.eventElement).trigger(ResizeEvents.conf.windowResizeEvent,[t,n]),ResizeEvents.currentWindowHeight=n)},ResizeEvents.throttle=function(e,t){var n=e.toString().match(/ResizeEvents\.throttle\s*\(\s*([^,\s]+)/)[1];return!0===ResizeEvents.throttleStates[n]?(ResizeEvents.throttleStates[n]=null,!1):(null!==ResizeEvents.throttleStates[n]&&window.clearTimeout(ResizeEvents.throttleStates[n]),ResizeEvents.throttleStates[n]=window.setTimeout(function(){ResizeEvents.releaseThrottle(n,e)},t),!0)},ResizeEvents.releaseThrottle=function(e,t){ResizeEvents.throttleStates[e]=!0,t.apply()}}(jQuery,qg),function(e){function t(t){function i(t){var n=new RegExp(e.map(t,encodeURIComponent).join("|"),"ig");return function(e){return e.replace(n,decodeURIComponent)}}t=e.extend({unescape:!1},t||{}),n.encoder=function(e){return!0===e?function(e){return e}:"string"==typeof e&&(e=i(e.split("")))||"function"==typeof e?function(t){return e(encodeURIComponent(t))}:encodeURIComponent}(t.unescape)}var n={put:function(e,t){(t||window).location.hash=this.encoder(e)},get:function(t){var n=(t||window).location.hash.replace(/^#/,"");try{return e.browser.mozilla?n:decodeURIComponent(n)}catch(e){return n}},encoder:encodeURIComponent},i={id:"__jQuery_history",init:function(){var t='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';return e("body").prepend(t),this},_document:function(){return e("#"+this.id)[0].contentWindow.document},put:function(e){var t=this._document();t.open(),t.close(),n.put(e,t)},get:function(){return n.get(this._document())}},a={};a.base={callback:void 0,type:void 0,check:function(){},load:function(e){},init:function(e,n){t(n),o.callback=e,o._options=n,o._init()},_init:function(){},_options:{}},a.timer={_appState:void 0,_init:function(){var e=n.get();o._appState=e,o.callback(e),setInterval(o.check,100)},check:function(){var e=n.get();e!=o._appState&&(o._appState=e,o.callback(e))},load:function(e){e!=o._appState&&(n.put(e),o._appState=e,o.callback(e))}},a.iframeTimer={_appState:void 0,_init:function(){var e=n.get();o._appState=e,i.init().put(e),o.callback(e),setInterval(o.check,100)},check:function(){var e=i.get(),t=n.get();t!=e&&(t==o._appState?(o._appState=e,n.put(e),o.callback(e)):(o._appState=t,i.put(t),o.callback(t)))},load:function(e){e!=o._appState&&(n.put(e),i.put(e),o._appState=e,o.callback(e))}},a.hashchangeEvent={_init:function(){o.callback(n.get()),e(window).bind("hashchange",o.check)},check:function(){o.callback(n.get())},load:function(e){n.put(e)}};var o=e.extend({},a.base);"onhashchange"in window?o.type="hashchangeEvent":o.type="timer",e.extend(o,a[o.type]),e.history=o}(jQuery),jQuery.butterfly={},jQuery.butterfly.defaultOptions={contentDefaultWidth:null,contentDefaultHeight:"100%",mediaMaxWidth:"100%",mediaMaxHeight:"100%",treatAsMedia:!1,lightBoxMargin:null,animateResize:!0,animationSpeed:150,useIframe:"autodetect",collapseHeightWhenPossible:!0,reuseFragment:!1,closeButton:!0,closeButtonImage:"/assets/v3/lib/ext/butterfly/close.png",closeButtonCorner:"tr",clickOverlayCloses:!0,preloadLoadingImage:"",preloadGalleryControlsSprite:"",galleryControlWidth:49,galleryControlHeight:85,galleryMode:"rel",galleryContainers:"",galleryLoops:!1,captionMode:"title",preloadNextGalleryImage:!0,zoomFromClicked:!1,callbackPreOpen:null,callbackPreResize:null,callbackPostResize:null,callbackPostOpen:null,callbackPreClose:null,callbackPostClose:null,treatAsImage:!1},jQuery.butterfly.conf={overlayOpacity:".7",lightboxClass:"lightbox",lightboxLinkSelector:"a.lightbox"},jQuery.butterfly.linkCount=0,DOM_VK_END=35,DOM_VK_HOME=36,DOM_VK_LEFT=37,DOM_VK_UP=38,DOM_VK_RIGHT=39,DOM_VK_DOWN=40,DOM_VK_ESCAPE=27,function(e,t){"use strict";function n(e){return e=e||window.event,e.keyCode?e.keyCode:e.which?e.which:null}var i,a,o,s,l,r,c,d,h,u,p,b,w;e.fn.accessibleText=function(){return this.is("img")?this.attr("alt"):this.is("input")?this.attr("value"):e.map(this.contents(),function(t){if(3===t.nodeType)return t.data;if(1===t.nodeType){var n=e(t);return n.is("img, input")||n.find("img[alt], input[value]").length>0?n.accessibleText():n.text()}}).join("")},e(function(){void 0!==t&&e(this).each(function(){t.bind("x-text-resize x-window-resize",i)}),e.fn.centre=function(){return this.css({position:"fixed",top:(e(window).height()-this.outerHeight())/2+"px",left:(e(window).width()-this.outerWidth())/2+"px"})},e(document.body).append('<div id="jb-overlay"></div><div id="jb-window"><div id="jb-window-inner"><div id="jb-window-content" style="width: auto; height: auto;" tabindex="0"></div></div></div>').bind("keydown",r),e("#jb-overlay").fadeTo(0,e.butterfly.conf.overlayOpacity,function(){e(this).hide()}),e("#jb-window").hide().click(c),e("#jb-window-inner").centre(),e("#jb-window-content").css({overflow:"hidden"}).hide(),e.history.init(function(t){""===t?a.apply():/^!/.test(t)&&(t=t.substring(1),e("#"+t).trigger("click",[!1]))},{unescape:",/"})}),e.fn.butterfly=function(t){return t=void 0!==t?t:{},t.closeButtonImage&&e('<img src="'+t.closeButtonImage+'" alt="" />'),t.preloadLoadingImage&&e('<img src="'+t.preloadLoadingImage+'" alt="" />'),t.preloadGalleryControlsSprite&&e('<img src="'+t.preloadGalleryControlsSprite+'" alt="" />'),this.each(function(){o.apply(this,[t])})},o=function(t){var n=void 0!==Number.prototype.pxToEm;t=void 0===t?e.butterfly.defaultOptions:e.extend({},e.butterfly.defaultOptions,t),null===t.lightBoxMargin&&(t.lightBoxMargin=n?"2em":"20px"),null===t.contentDefaultWidth&&(t.contentDefaultWidth=n?"50em":"700px"),void 0!==e(this).attr("id")&&""!==e(this).attr("id")||e(this).attr("id",e.butterfly.conf.lightboxClass+"-uid-"+e.butterfly.linkCount),t.linkID=e(this).attr("id"),e.butterfly.linkCount++,e(this).data("options",t),e(this).addClass(e.butterfly.conf.lightboxClass),e(this).click(s)},s=function(t,n){var i,o,s,r,c,h,p,b,w;if(void 0!==t&&t.preventDefault(),n=void 0===n||n)return void e.history.load("!"+e(this).attr("id"));switch(e("#jb-window-inner").css("overflow","hidden"),e("#jb-overlay").is(":visible")?(i=e("#jb-overlay").data("options"),"fragment"===i.linkType&&i.reuseFragment&&e(".jb-placeholder").remove(),o=i.originalTrigger):o=this,r=window.location.href.replace(/#.*$/,""),s=e(this).attr("href"),0===s.indexOf(r)&&(s=s.substring(r.length)),c=e(this).attr("title"),h=e(this).accessibleText(),i=e(this).data("options"),i.href=s,i.title=c,i.linkText=h,i.trigger=this,i.originalTrigger=o,document.getElementById("jb-window-inner").className=i.className||"",i.treatAsImage||u(s)?i.linkType="image":"#"===s.substring(0,1)?i.linkType="fragment":!0===i.useIframe||!1!==i.useIframe&&this.hostname!==window.location.hostname?(i.linkType="iframe",i.useIframe=!0,i.contentDefaultWidth="100%",i.contentDefaultHeight="100%"):i.linkType="ajax",null!==i.callbackPreOpen&&"function"==typeof i.callbackPreOpen&&i.callbackPreOpen.apply(this),i.closeButton?0===e("#jb-close-button").length&&(e("#jb-window").prepend('<a href="#" id="jb-close-button"><img src="'+i.closeButtonImage+'" alt="Close lightbox" /></a>'),e("#jb-close-button").click(a)):e("#jb-close-button").remove(),i.clickOverlayCloses?e("#jb-window").addClass("reactive"):e("#jb-window").removeClass("reactive"),p=e(this),""!==i.galleryContainers&&(i.galleryMode="container"),i.gallerySelector="",i.galleryMode){case"all":i.gallerySelector=e.butterfly.conf.lightboxLinkSelector;break;case"container":e.each(i.galleryContainers.split(","),function(){if(b=this+" "+e.butterfly.conf.lightboxLinkSelector,p.is(b))return i.gallerySelector=b,!1})}""===i.gallerySelector&&""!==e(this).attr("rel")&&(i.gallerySelector=e.butterfly.conf.lightboxLinkSelector+'[rel="'+e(this).attr("rel")+'"]'),w=e("#jb-overlay").data("options")||{},e(this).data("options",i),e("#jb-overlay").data("options",i),e("#jb-window").append('<p id="jb-loading">Loading...</p>'),e("#jb-loading").attr("tabindex","0").focus(),e("#jb-overlay").is(":visible")?("fragment"===w.linkType&&w.reuseFragment&&(e(".jb-placeholder").after(e(w.href)),e(".jb-placeholder").remove(),e(w.href).disableFocussableElements()),e("#jb-window-content").hide().empty(),e("#jb-window").addClass("loading"),l.apply(this,[d])):(e(document.body).disableFocussableElements("#jb-window *"),e("#jb-close-button").hide(),e("#jb-gallery-controls").hide(),e("#jb-overlay").fadeIn(i.animationSpeed).centre(),e("#jb-window").addClass("loading").show(),i.zoomFromClicked?e("#jb-window-inner").css({top:e(this).offset().top,left:e(this).offset().left,width:e(this).width(),height:e(this).height()}):e("#jb-window-inner").css({width:"100px",height:"100px"}).centre(),l.apply(this,[d]))},d=function(){var t=e("#jb-overlay").data("options");e("#jb-window").restoreFocussableElements(),e("#jb-window").removeClass("loading"),setTimeout(function(){switch(e("#jb-window").removeClass("type-media type-image type-fragment type-ajax"),t.linkType){case"image":e("#jb-window").addClass("type-image type-media"),e("#jb-window-inner").css("overflow","hidden");break;case"fragment":e("#jb-window").addClass("type-fragment"),e("#jb-window-inner").css("overflow","auto");break;case"iframe":e("#jb-window").addClass("type-iframe"),e("#jb-window-inner").css("overflow","hidden");break;case"ajax":e("#jb-window").addClass("type-ajax"),e("#jb-window-inner").css("overflow","auto")}t.treatAsMedia&&e("#jb-window").addClass("type-media"),i.apply(this,[function(){var n;"iframe"===t.linkType&&e("#jb-window-content").css("visibility","visible"),e("#jb-window-content").fadeIn(t.animationSpeed,function(){e("#jb-window-content").focus(),e("#jb-loading").remove(),null!==t.callbackPostOpen&&"function"==typeof t.callbackPostOpen&&t.callbackPostOpen.apply(this),n=e("#jb-gallery-next"),t.preloadNextGalleryImage&&n.length>0&&n.is(":visible")&&"#"!==n.attr("href")&&u(n.attr("href"))&&e('<img src="'+n.attr("href")+'" alt="" />')})}])},0)},i=function(t){var n,i,a,o,s,l,r,c,d,h,u,w,f,g,v,m,y,j,k,x,E,z=e("#jb-overlay").data("options");void 0!==z&&(n=parseInt(p(z.lightBoxMargin),10),i=e("#jb-window").width()-2*n,a=e("#jb-window").height()-2*n,o=p(z.contentDefaultWidth,i),s=p(z.contentDefaultHeight,a),l=p(z.mediaMaxWidth,i),r=p(z.mediaMaxHeight,a),null!==z.callbackPreResize&&"function"==typeof z.callbackPreResize&&z.callbackPreResize.apply(e("#jb-window"),[i,a,o,s,l,r]),"image"===z.linkType||z.treatAsMedia?(c=e("#jb-window-content").lightBoxContentWidth(),d=e("#jb-window-content").lightBoxContentHeight(),c>l&&(h=c/l,c=l,d/=h),d>r&&(h=d/r,d=r,c/=h),c>i&&(h=c/i,c=i,d*=h),d>a&&(h=d/a,d=a,c*=h)):"iframe"===z.linkType?(c=o,d=s):(c=e("#jb-window-content").lightBoxContentWidth(),c=""===o||"100%"===o||i<o?i:o,z.collapseHeightWhenPossible?(u=e("#jb-window-inner").width(),e("#jb-window-inner").animate({width:c},0),d=e("#jb-window-content").lightBoxContentHeight(!1),e("#jb-window-inner").width(u),a<d&&(d=a)):(d=e("#jb-window-content").lightBoxContentHeight(),d=""===s||"100%"===s||a<s?a:s)),w=b(c,d),f=z.animateResize?z.animationSpeed:0,e("#jb-close-button").hide(),e("#jb-gallery-controls").hide(),"iframe"===z.linkType&&e("#jb-window-inner iframe").css("visibility","hidden"),e("#jb-window-inner").animate({width:c,height:d,left:w[1],top:w[0]},f,0,function(){if(z=e("#jb-overlay").data("options"),c=e("#jb-window-inner").width(),d=e("#jb-window-inner").height(),"iframe"===z.linkType&&(e("#jb-window-inner iframe").width(c).height(d),e("#jb-window-inner iframe").css("visibility","visible")),e("#jb-close-button").length>0){switch(g=parseInt(e("#jb-close-button").width(),10),v=parseInt(e("#jb-close-button").height(),10),z.closeButtonCorner){case"tr":m=w[1]+c-g/2,y=w[0]-v/2;break;case"br":m=w[1]+c-g/2,y=w[0]+d-v/2;break;case"bl":m=w[1]-g/2,y=w[0]+d-v/2;break;default:m=w[1]-g/2,y=w[0]-v/2}e("#jb-close-button").css({position:"absolute","z-index":"999999",left:m,top:y}).show()}e("#jb-gallery-controls").is(".active")&&(j=w[0]+d/2-z.galleryControlHeight/2,k=w[1]-z.galleryControlWidth,e("#jb-gallery-prev").css({top:j,left:k}),x=w[0]+d/2-z.galleryControlHeight/2,E=w[1]+c,e("#jb-gallery-next").css({top:x,left:E}),e("#jb-gallery-controls").show()),null!==z.callbackPostResize&&"function"==typeof z.callbackPostResize&&z.callbackPostResize.apply(e("#jb-window"),[i,a,o,s,l,r]),void 0!==t&&void 0!==t.apply&&t.apply()}))},l=function(t){var n,i,a,o,s,l,r,c,d,u,b,f,g=e("#jb-overlay").data("options"),v=g.href;switch(g.captionMode){case"title":n=g.title?"<p class='jb-caption'><span>"+g.title+"</span></p>":"";break;case"text":n=g.linkText?"<p class='jb-caption'><span>"+g.linkText+"</span></p>":"";break;default:n=""}switch(e("#jb-window").removeClass("error-no-content"),i=e(g.gallerySelector),e("#jb-gallery-controls").removeClass("active"),i.length>1&&i.isInSet("#"+g.linkID)?(0===e("#jb-gallery-controls").length?(e("#jb-window").append('<div id="jb-gallery-controls"></div>'),a=e('<a id="jb-gallery-prev" href="#">Previous</a>').click(h),o=e('<a id="jb-gallery-next" href="#">Next</a>').click(h),e("#jb-gallery-controls").append(a).append(o),a.add(o).css({position:"absolute","z-index":"99999",display:"block",overflow:"hidden"})):(a=e("#jb-gallery-prev"),o=e("#jb-gallery-next"),a.add(o).removeClass("disabled").attr("tabindex","0").attr("title","").show()),e("#jb-gallery-controls").hide(),e("#jb-gallery-controls").addClass("active"),s=i.prevInSet("#"+g.linkID),!1===s&&(g.galleryLoops?s=i.lastInSet():(s=e('<a href="#" id=""></a>'),a.addClass("disabled").attr("tabindex","-1").hide())),a.attr("href",s.attr("href")).data("linkID",s.attr("id")).attr("title",e.trim(s.accessibleText())),l=i.nextInSet("#"+g.linkID),!1===l&&(g.galleryLoops?l=i.firstInSet():(l=e('<a href="#" id=""></a>'),o.addClass("disabled").attr("tabindex","-1").hide())),o.attr("href",l.attr("href")).data("linkID",l.attr("id")).attr("title",e.trim(l.accessibleText()))):e("#jb-gallery-controls").hide(),g.linkType){case"fragment":g.reuseFragment?(e(v).after('<span class="jb-placeholder"></span>'),e("#jb-window-content").empty().append(e(v))):e("#jb-window-content").empty().append(e(v).clone(!0)),w.apply(this,[g.linkType,v]),t.apply(this);break;case"image":e("#jb-window-content").empty().append('<img src="'+v+'" alt="" style="max-width: 100%; max-height: 100%; float: left;" />'+n),e("#jb-window-content img").error(function(){w.apply(this,[g.linkType,v,t])}).data("full-width","").data("full-height","").load(t);break;case"iframe":e("#jb-window-content").show().css("visibility","hidden"),e("#jb-window-content").empty().append('<iframe src="'+v+'" title="'+n+'" width="100%" height="1000" />'),e("#jb-window-content").css("visibility","hidden"),r=parseInt(p(g.lightBoxMargin),10),c=e("#jb-window").width()-2*r,d=e("#jb-window").height()-2*r,u=p(g.contentDefaultWidth,c),b=p(g.contentDefaultHeight,d),e("#jb-window-content > iframe").width(u).height(b).error(function(){w.apply(this,[g.linkType,v,t])}).load(t);break;default:e.ajaxSetup({cache:!0}),f=-1!==v.indexOf("#")?v.split("#").join(" #"):v,e("#jb-window-content").empty().load(f,function(){w.apply(this,[g.linkType,v]),t.apply(this)})}},w=function(t,n,i){var a,o=!1;"image"!==t&&0!==e("#jb-window-content").children().length||(o=!0),o&&(a=e("#jb-overlay").data("options"),a.linkType="fragment",a.treatAsMedia=!1,e("#jb-overlay").data("options",a),e("#jb-window").removeClass("type-image type-media").addClass("type-fragment error-no-content"),e("#jb-window-content").empty().append("<p>There was an error loading lightbox content. <strong>"+e(a.trigger).text()+"</strong> (<samp>"+n+"</samp>) could not be found.</p>")),void 0!==i&&i.apply(this)},a=function(t){var n,i,a;if(t&&t.preventDefault(),!e("#jb-window:hidden").length){n=e("#jb-overlay").data("options"),i=n.href,null!==n.callbackPreClose&&"function"==typeof n.callbackPreClose&&n.callbackPreClose.apply(n.trigger),"fragment"===n.linkType&&n.reuseFragment&&(e(".jb-placeholder").after(e(i)),e(".jb-placeholder").remove()),e(document.body).restoreFocussableElements(),e("#jb-overlay").fadeOut(n.animationSpeed),e("#jb-window").hide(),e("#jb-window-content").hide(),a=e(n.originalTrigger),void 0===a.attr("tabindex")&&a.attr("tabindex",0),a.focus(),e("#jb-loading").remove(),null!==n.callbackPostClose&&"function"==typeof n.callbackPostClose&&n.callbackPostClose.apply(n.trigger);var o=e(window).scrollTop();e.history.load(""),e(window).scrollTop(o),e(a).focus()}};e.fn.lightBoxContentWidth=function(){var t,n=this.closest("#jb-window"),i=e("#jb-window-inner"),a=!!n.hasClass("type-media"),o=(n.hasClass("media-image"),i.width()),s=i.height(),l=i.css("left"),r=i.css("top");return i.css({width:"auto",height:"auto",left:0,top:0}),"none"===this.css("display")?(this.css("display","block"),t=a?this.find("img").outerWidth(!0):this.outerWidth(!0),this.css("display","none")):t=this.outerWidth(!0),i.css({left:l,top:r}),i.animate({width:o,height:s},0),t},e.fn.lightBoxContentHeight=function(t){var n,i=this.closest("#jb-window"),a=i.find("#jb-window-inner"),o=(i.hasClass("type-media"),i.hasClass("media-image"),a.width()),s=a.height(),l=a.css("left"),r=a.css("top");return t=void 0===t||t,e("#jb-window-inner").height("auto"),t&&e("#jb-window-inner").width("auto").css({left:0,top:0}),"none"===this.css("display")?(this.css("display","block"),n=this.outerHeight(!0),this.css("display","none")):n=e(this).outerHeight(!0),e("#jb-window-inner").width(o).height(s).css({left:l,top:r}),n},c=function(t){var n=e("#jb-overlay").data("options");t.target===e("#jb-window").get(0)&&n.clickOverlayCloses&&a.apply()},r=function(t){if(!e("#jb-overlay").is(":visible")||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)return!0;switch(n(t)){case DOM_VK_UP:case DOM_VK_LEFT:e("#jb-gallery-prev").click();break;case DOM_VK_DOWN:case DOM_VK_RIGHT:e("#jb-gallery-next").click();break;case DOM_VK_HOME:e(e("#jb-overlay").data("options").gallerySelector).firstInSet().click();break;case DOM_VK_END:e(e("#jb-overlay").data("options").gallerySelector).lastInSet().click();break;case DOM_VK_ESCAPE:a.apply();break;default:return!0}t.preventDefault()},h=function(t){var n,i=e(this);if(t.preventDefault(),""!==i.data("linkID"))return e("#jb-gallery-controls").hide(),n=e("#"+i.data("linkID")),n.click()},b=function(t,n){return[(e(window).height()-n)/2,(e(window).width()-t)/2]},e.fn.isInSet=function(t){return-1!==this.index(e(t))},e.fn.nextInSet=function(t){var n=this.index(e(t));return this.length>n+1&&this.eq(n+1)},e.fn.prevInSet=function(t){var n=this.index(e(t));return n>0&&this.eq(n-1)},e.fn.firstInSet=function(){return this.length>0&&this.eq(0)},e.fn.lastInSet=function(){return this.length>0&&this.eq(-1)},u=function(e){if(void 0===e||""===e)return!1;var t=String(e).lastIndexOf(".");return-1!==t&&/^\.(jpg|png|gif|bmp|jpeg)$/i.test(e.substring(t))},e.fn.disableFocussableElements=function(t){t=t||"",this.find("a, input, button, area, frame, iframe, [tabindex]").not(t).not('*[tabindex="-1"]').each(function(){var t=e(this),n=t.attr("tabindex");n=void 0===n||""===n?"":n,t.data("prevTabIndex",n).addClass("jb-unfocussed").attr("tabindex","-1")})},e.fn.restoreFocussableElements=function(){this.find(".jb-unfocussed").each(function(){var t=e(this),n=t.data("prevTabIndex");switch(n){case"":t.removeAttr("tabindex");break;default:t.attr("tabindex",n)}t.removeClass("jb-unfocussed")})},p=function(t,n){return n=void 0!==n?n:e(document.body).width(),t=t.replace("px","").replace(/^\s+|\s+$/g,""),isNaN(t)?"%"===t.substr(t.length-1)?void 0!==n?(t=parseInt(t.substr(0,t.length-1).replace(/^\s+|\s+$/g,""),10))/100*parseInt(n,10):(e.debug("Warning: percentage unit was supplied to parsePixels() but could not be calculated because centDimension was not supplied."),parseInt(t,10)):"em"===t.substr(t.length-2)?void 0!==Number.prototype.pxToEm?(t=parseInt(t.substr(0,t.length-2).replace(/^\s+|\s+$/g,""),10),t=t.pxToEm({reverse:!0}),t.substr(0,t.length-2)):(e.debug("Warning: em unit was supplied to parsePixels() but could not be calulated because pxToEm plugin was not found."),parseInt(t,10)):(e.debug("Warning: unknown unit was supplied. parsePixels() can support px, em or % units only."),parseInt(t,10)):parseInt(t,10)}}(jQuery,ResizeEvents),$(function(){"use strict";$("form").filter('[action*="//find.search.qld.gov.au/"]').not(".qg-funnelback-search").each(function(){function e(){l.empty()}function t(e){a[0].value=e,setTimeout(function(){a[0].setSelectionRange(s.length,a[0].value.length)},0)}function n(e){var n=l.find("a"),i=n.filter(".focus");i.length>0?(e=(n.index(i)+e)%n.length,i.removeClass("focus")):e=e>-1?0:-1,n=n.eq(e),n.addClass("focus"),t(n.text())}var i=this,a=$(i.elements.query).filter('[name="query"]'),o=a.val(),s="";a.attr("role","combobox").attr("autocomplete","off").attr("aria-autocomplete","both");var l=$('<ul role="listbox" class="listbox" aria-busy="true"/>').generateId("suggestbox");a.after(l),a.attr("aria-owns",l.attr("id")),l.on("click","a",function(t){t.preventDefault(),a.val($(this).text()).get(0).focus(),e()});var r={alt:18,backspace:8,delete:46,down:40,enter:13,escape:27,left:37,right:39,tab:9,up:38};$(document).on("click",function(t){a.is(t.target)?t.stopImmediatePropagation():e()}),a.on("keydown",function(t){switch(t.which){case r.up:case r.down:n(t.which===r.down?1:-1);break;case r.tab:e()}}),a.on("keyup",function(t){switch(t.which){case r.escape:case r.enter:e()}}),a.on("input",function(){if(s=this.value,s.length<3)return void e();$.ajax({cache:!0,dataType:"jsonp",url:"https://find.search.qld.gov.au/s/suggest.json?",data:{collection:$(i.elements.collection).filter('[name="collection"]').val()||"qld-gov",profile:$(i.elements.profile).filter('[name="profile"]').val()||"qld_preview",show:7,partial_query:s}}).done(function(t){if(t.length<1)return void e();var n=new RegExp(s.replace(/([.+*?\[^\]$(){}=!<>|:-\\,])/g,"\\$1"),"g"),i=s.replace(/</g,"&lt;");l.html($.map(t,function(e){var t=e.replace(/</g,"&lt;").replace(n,"<mark>"+i+"</mark>");return'<li><a href="https://find.search.qld.gov.au/s/search.html?collection=qld-gov&profile=qld&query='+encodeURIComponent(e)+'">'+t+"</a></li>"}).join("\n")),o=a.val(),l.attr("aria-busy","false")})})})});
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/_project/lib/ext/butterfly/butterfly.css">
  <link rel="stylesheet" href="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/modules/jquery.status/build/styles/jquery.status.css">
</head>
<body>
<div class="container">
  <a id="data-url" data-url="https://data.qld.gov.au/dataset/q-ride-providers/resource/0647759d-9f68-44f9-bd7e-eb96d37d11e" style="display:none">View full Data</a>
  <p class="search-result"></p>
</div>
<script
  src="https://code.jquery.com/jquery-1.12.4.js"
  integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
  crossorigin="anonymous"></script>
<script type="text/javascript">
  if (qg === undefined) {
    var qg = {};
  }
</script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/_project/lib/ext/generate-id.js"></script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/_project/lib/ext/jquery.resize-events.js"></script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/modules/jquery.history/build/jquery.history.bundle.js"></script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/_project/lib/ext/butterfly/jquery.butterfly.js"></script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/working/src/assets/modules/jquery.status/build/jquery.status.bundle.js"></script>
<script type="text/javascript" src="https://rawgit.com/qld-gov-au/qg-web-template/Feature/QOL-1104-data-module/src/assets/_project/lib/ext/jquery.jsonp.js"></script>
<script type="text/javascript" src="data.bundle.js"></script>
  <script type="text/javascript">
    // init code
    $(function () {
      var dataUrl = $('#data-url').data('url'),
        dataEnvironment = dataUrl.indexOf('staging.data.qld.gov.au') >= 0 ? 'staging.data.qld.gov.au' : 'data.qld.gov.au',
        resourceId = dataUrl.split('resource/')[1],
        sql = 'Select * from "' + resourceId + '"';
      qg.data.get(dataEnvironment, sql, {
        cache: !0,
        modalCloseButtonImage: 'images/close.png',
        successCallback: function (data) {
          // var titleField = displayTemplateHtml.replace( /^[\s\S]*?\{\{.*?\}\}.*?\{\{(.*?)\}\}[\s\S]*$/m, '$1' );
          if (data.result.records.length > 0) {
            $.each(data.result.records, function (k, v) {
              $('.search-result').append(v.Title + '<br>');
            });
          } else {
            $('.search-result').html('No records found');
          }
        }
      });
    });
  </script>
<script type="text/javascript" src="/build/data.bundle.js"></script></body>
</html>
